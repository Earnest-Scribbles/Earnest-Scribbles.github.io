---
import { getImage } from "astro:assets";
import noteFrame from "../../assets/notebook/noteframe.jpg";

const noteFrameImage = await getImage({ src: noteFrame });

const { title, description, pubDate, id } = Astro.props;
const formattedDate = new Date(pubDate).toLocaleDateString("en-us", {
  year: "numeric",
  month: "short",
  day: "numeric",
});
---

<div class="relative bg-white border-2 border-black p-6 rounded-lg max-w-sm w-full shadow-lg shadow-gray-500/50 transform hover:scale-105 transition-transform duration-200 ease-in-out overflow-hidden">
    <!-- Background Image -->
    <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" style={`background-image: url('${noteFrameImage.src}');`}></div>

    <!-- Card Content -->
    <div class="relative z-10 flex flex-col">
        <!-- Title with Torn Paper Effect and Date -->
        <h2 class="text-2xl text-emerald-500 font-bold font-sketch border-b-2 border-dashed border-gray-400 pb-1 mb-1">
            {title}
        </h2>

        <!-- Date Display directly under the title -->
        <div class="text-gray-600 font-title text-sm mb-2">
            {formattedDate}
        </div>
        
        <!-- Description Area -->
        <p class="text-gray-800 font-title text-lg p-2 rounded-lg border-2 border-gray-400 shadow-md mb-4">
            {description}
        </p>
        <button class="self-center bg-transparent border-2 border-gray-400 border-dashed px-4 py-2 rounded-full font-bold font-title hover:bg-teal-200 transition-colors">
          <a href={`/notebook/${id}/`}>✨ Read Notes ✨</a>
        </button>
    </div>

    <!-- Decorative Punch Holes -->
    <div class="absolute top-0 left-0 h-full w-4 bg-transparent border-l-2 border-gray-600 rounded-bl-lg rounded-tl-lg"></div>
    <div class="absolute top-0 left-1 h-4 w-4 bg-transparent border-l-2 border-gray-600 rounded-full"></div>
    <div class="absolute top-1/4 left-1 h-4 w-4 bg-transparent border-l-2 border-gray-600 rounded-full"></div>
    <div class="absolute top-1/2 left-1 h-4 w-4 bg-transparent border-l-2 border-gray-600 rounded-full"></div>
    <div class="absolute top-3/4 left-1 h-4 w-4 bg-transparent border-l-2 border-gray-600 rounded-full"></div>

    <!-- Squiggly border around the card -->
    <div class="absolute inset-0 border-2 border-black rounded-lg transform -rotate-1 pointer-events-none"></div>
</div>